<section class="p-2" id="day-detail-container">
  {% if success_message %}
  <div class="alert alert-success mb-4">
    <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
      />
    </svg>
    <span>{{ success_message }}</span>
  </div>
  {% endif %}

  <h3 class="text-lg font-bold mb-4">{{ day }}</h3>

  {% if not has_data %}
  <div class="alert bg-base-300 text-base-content">記録なし</div>
  {% else %}
  <!-- 勤務場所データと社員リスト -->
  <div class="card card-compact bg-base-100 shadow-md mb-2">
    <div class="card-body">
      <div class="flex flex-wrap gap-4">
        {% for location, location_data in organized_data.items() %}
        <div class="card card-compact bg-base-200" style="width: 224px">
          <div class="card-body">
            <h3 class="card-title text-sm">{{ location }}</h3>

            {% for group_name in location_data.group_names %}
            <div class="mt-3">
              <h4 class="text-xs font-semibold uppercase text-base-content/70 px-1 mb-1">{{ group_name }}</h4>
              <ul class="space-y-1 mt-1">
                {% for user in location_data.groups[group_name] %}
                <li
                  class="flex items-center p-2 bg-base-100 rounded cursor-pointer hover:bg-base-300 transition-colors"
                  hx-get="/day/{{ target_date }}/user/{{ user.user_id }}"
                  hx-target="#day-detail-container"
                  hx-swap="outerHTML"
                >
                  <div class="flex-1 min-w-0">
                    <span class="font-medium truncate block">{{ user.user_name }}</span>
                  </div>
                  {% if user.user_type_name %}
                  <span class="badge badge-sm badge-primary whitespace-nowrap ml-1">{{ user.user_type_name }}</span>
                  {% endif %}
                </li>
                {% endfor %}
              </ul>
            </div>
            {% endfor %}
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
  {% endif %}
</section>
