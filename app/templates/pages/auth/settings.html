{% extends "layout/base.html" %}

{% block content %}
<section class="max-w-3xl mx-auto mt-8 space-y-4">
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-2xl font-bold">認証設定</h1>
      <p class="text-sm text-base-content/70">Keycloak OIDC の有効/無効を切り替えます（管理者専用）。</p>
    </div>
    <a href="/" class="btn btn-ghost btn-sm">戻る</a>
  </div>

  {% if message %}
  <div class="alert alert-info text-sm">
    <span>{{ message }}</span>
  </div>
  {% endif %}

  <div class="card bg-base-200 shadow">
    <div class="card-body space-y-4">
      <div class="flex items-center justify-between">
        <div>
          <h2 class="card-title text-base">OIDC 有効化</h2>
          <p class="text-sm text-base-content/70">
            無効化すると Keycloak 経路でのログインは開始できなくなります（ローカル管理者は継続）。
          </p>
        </div>
        <form action="/auth/settings/oidc/toggle" method="post">
          <input type="hidden" name="enabled" value="{{ 'false' if state.oidc_enabled else 'true' }}">
          {% if state.oidc_enabled %}
          <button type="submit" class="btn btn-outline btn-error">無効化する</button>
          {% else %}
          <button type="submit" class="btn btn-primary">有効化する</button>
          {% endif %}
        </form>
      </div>
      <div class="text-sm text-base-content/70">
        <p>現在の状態: <span class="font-semibold">{{ '有効' if state.oidc_enabled else '無効' }}</span></p>
      </div>
    </div>
  </div>
</section>
{% endblock %}
