{% extends "layout/base.html" %} {% block content %}
<!-- カレンダーエリア -->
<div
  id="calendar-area"
  hx-get="/calendar"
  hx-trigger="load"
  hx-target="#calendar-area"
  class="card bg-base-200 shadow-lg rounded-lg p-5"
>
  <!-- 初期ロード時に/calendarを呼び出し、結果をここに挿入 -->
</div>

<!-- 詳細表示エリア -->
<div id="detail-area" class="card bg-base-200 shadow-lg rounded-lg p-5">
  {% if default_day and default_data %}
  <section class="p-2">
    <h3 class="text-lg font-bold mb-5 text-base-content">{{ default_day }}</h3>

    {% if not default_has_data %}
    <div class="alert bg-base-300 text-base-content">記録なし</div>
    {% else %}
    <!-- 勤務場所データと社員リスト -->
    <div class="flex flex-col gap-5">
      <div class="flex-1">
        <div class="grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6">
          <!-- 勤務場所カード -->
          {% for location in default_locations %}
          <div
            class="card bg-base-100 shadow-md hover:shadow-lg transition-shadow duration-300 w-full min-w-[16rem] max-w-full"
          >
            <div class="card-body px-4 py-3">
              <div class="flex items-center gap-2 mb-2">
                <span class="badge badge-{{ location.badge }}"></span>
                <h4 class="card-title text-sm font-medium">{{ location.name }}</h4>
              </div>
              <ul class="menu menu-sm p-0">
                {% for user in default_data[location.name] %}
                <li hx-get="/user/{{ user.user_id|e }}" hx-target="#detail-area" class="hover:bg-base-200 rounded-md">
                  <a class="py-2">{{ user.user_name|e }} ({{ user.user_id|e }})</a>
                </li>
                {% endfor %}
              </ul>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
    {% endif %}
  </section>
  {% endif %}
</div>
{% endblock %}
