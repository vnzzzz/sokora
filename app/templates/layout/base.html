<!DOCTYPE html>
<html lang="ja" x-data class="bg-base-100">
  <head>
    {% include "components/common/head.html" %}
    <style>
      [x-cloak] {
        display: none !important;
      }
    </style>
  </head>

  <body class="min-h-screen bg-base-100">
    <!-- テーマ切替ボタン -->
    {% include "components/common/theme_switcher.html" %}

    <!-- レイアウト -->
    <div
      class="flex"
      x-data="{
        isSidebarOpen: localStorage.getItem('sidebarOpen') === null ? true : localStorage.getItem('sidebarOpen') === 'true'
      }"
      x-init="$watch('isSidebarOpen', value => localStorage.setItem('sidebarOpen', value))"
      x-cloak
    >
      <!-- サイドバー -->
      {% include "components/common/sidebar.html" with context %}

      <!-- メインコンテンツ -->
      <main
        class="flex-1 py-2 px-3 space-y-4 transition-all duration-300 ease-in-out"
        :class="{
          'ml-[200px] max-w-[calc(100vw-200px-1.5rem)]': isSidebarOpen, {# 左右padding 0.75rem*2 = 1.5rem を考慮 #}
          'ml-16 max-w-[calc(100vw-64px-1.5rem)]': !isSidebarOpen       {# 左右padding 0.75rem*2 = 1.5rem を考慮 #}
        }"
      >
        {% block content %}{% endblock %}
      </main>
    </div>

    <!-- JavaScript -->
    {% block extra_scripts %}
    <!-- ページ固有のスクリプトはここに挿入されます -->
    {% endblock %}
  </body>
</html>
