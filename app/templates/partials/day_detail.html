<section class="p-2">
  {% if success_message %}
  <div class="alert alert-success mb-4">
    <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
      />
    </svg>
    <span>{{ success_message }}</span>
  </div>
  {% endif %}

  <h3 class="text-lg font-bold mb-4">{{ day }}</h3>

  {% if not has_data %}
  <div class="alert bg-base-300 text-base-content">記録なし</div>
  {% else %}
  <!-- 勤務場所データと社員リスト -->
  <div class="card card-compact bg-base-100 shadow-md mb-2">
    <div class="card-body">
      <h2 class="card-title text-base">勤務場所別社員リスト</h2>
      <div class="flex flex-col gap-2">
        {% for location, users in attendance_data.items() %}
        <div class="card card-compact bg-base-200">
          <div class="card-body">
            <h3 class="card-title text-sm">{{ location }}</h3>
            <div class="flex flex-wrap gap-1">
              {% for user in users %}
              <div
                class="avatar placeholder cursor-pointer"
                hx-get="/day/{{ target_date }}/user/{{ user.user_id }}"
                hx-target="#user-detail"
                hx-swap="innerHTML"
              >
                <div class="bg-neutral text-neutral-content rounded-full w-12">
                  <span class="text-xs">{{ user.user_name }}</span>
                </div>
                {% if user.user_type_name %}
                <span class="badge badge-sm badge-primary">{{ user.user_type_name }}</span>
                {% endif %}
              </div>
              {% endfor %}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
  <div id="user-detail"></div>
  {% endif %}
</section>
